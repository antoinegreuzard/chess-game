{"version":3,"file":"pawn-DVKZR8Li.js","sources":["../../src/pieces/pawn.ts"],"sourcesContent":["// src/pieces/pawn.ts\nimport { BoardInterface, Piece, PieceColor, PieceType } from '../piece';\n\nexport class Pawn extends Piece {\n  public hasMoved: boolean = false;\n  private _toX: number | null = null;\n  private _toY: number | null = null;\n  private _board: BoardInterface | null = null;\n\n  constructor(color: PieceColor) {\n    super(color, PieceType.PAWN);\n  }\n\n  isValidMove(\n    fromX: number,\n    fromY: number,\n    toX: number,\n    toY: number,\n    board: BoardInterface,\n  ): boolean {\n    if (toX < 0 || toX >= 8 || toY < 0 || toY >= 8) {\n      return false;\n    }\n\n    const direction = this.color === PieceColor.WHITE ? -1 : 1;\n    const startRow = this.color === PieceColor.WHITE ? 6 : 1;\n    const promotionRow = this.color === PieceColor.WHITE ? 0 : 7;\n\n    const distanceY = (toY - fromY) * direction;\n    const distanceX = toX - fromX;\n\n    // Avance d'une case tout droit\n    if (distanceX === 0 && distanceY === 1 && !board.getPiece(toX, toY)) {\n      if (toY === promotionRow) {\n        return this.handlePromotion(toX, toY, board);\n      }\n      return true;\n    }\n\n    // Avance de deux cases depuis la ligne de d√©part\n    if (\n      distanceX === 0 &&\n      distanceY === 2 &&\n      fromY === startRow &&\n      !board.getPiece(toX, toY) &&\n      !board.getPiece(fromX, fromY + direction)\n    ) {\n      board.updateEnPassantTarget(fromX, fromY, toX, toY, this);\n      return true;\n    }\n\n    // Capture diagonale\n    if (\n      Math.abs(distanceX) === 1 &&\n      distanceY === 1 &&\n      board.getPiece(toX, toY) &&\n      this.canCapture(toX, toY, board)\n    ) {\n      if (toY === promotionRow) {\n        return this.handlePromotion(toX, toY, board);\n      }\n      return true;\n    }\n\n    // Capture en passant\n    if (\n      Math.abs(distanceX) === 1 &&\n      distanceY === 1 &&\n      board.isEnPassantMove(fromX, fromY, toX, toY)\n    ) {\n      board.captureEnPassantIfValid(fromX, fromY, toX, toY);\n      return true;\n    }\n\n    return false;\n  }\n\n  handlePromotion(toX: number, toY: number, board: BoardInterface): boolean {\n    this._toX = toX;\n    this._toY = toY;\n    this._board = board;\n    return true;\n  }\n}\n"],"names":["Pawn","Piece","color","PieceType","fromX","fromY","toX","toY","board","direction","PieceColor","startRow","promotionRow","distanceY","distanceX"],"mappings":"iDAGO,MAAMA,UAAaC,CAAM,CACvB,SAAoB,GACnB,KAAsB,KACtB,KAAsB,KACtB,OAAgC,KAExC,YAAYC,EAAmB,CACvB,MAAAA,EAAOC,EAAU,IAAI,CAAA,CAG7B,YACEC,EACAC,EACAC,EACAC,EACAC,EACS,CACT,GAAIF,EAAM,GAAKA,GAAO,GAAKC,EAAM,GAAKA,GAAO,EACpC,MAAA,GAGT,MAAME,EAAY,KAAK,QAAUC,EAAW,MAAQ,GAAK,EACnDC,EAAW,KAAK,QAAUD,EAAW,MAAQ,EAAI,EACjDE,EAAe,KAAK,QAAUF,EAAW,MAAQ,EAAI,EAErDG,GAAaN,EAAMF,GAASI,EAC5BK,EAAYR,EAAMF,EAGpB,OAAAU,IAAc,GAAKD,IAAc,GAAK,CAACL,EAAM,SAASF,EAAKC,CAAG,EAC5DA,IAAQK,EACH,KAAK,gBAAgBN,EAAKC,EAAKC,CAAK,EAEtC,GAKPM,IAAc,GACdD,IAAc,GACdR,IAAUM,GACV,CAACH,EAAM,SAASF,EAAKC,CAAG,GACxB,CAACC,EAAM,SAASJ,EAAOC,EAAQI,CAAS,GAExCD,EAAM,sBAAsBJ,EAAOC,EAAOC,EAAKC,EAAK,IAAI,EACjD,IAKP,KAAK,IAAIO,CAAS,IAAM,GACxBD,IAAc,GACdL,EAAM,SAASF,EAAKC,CAAG,GACvB,KAAK,WAAWD,EAAKC,EAAKC,CAAK,EAE3BD,IAAQK,EACH,KAAK,gBAAgBN,EAAKC,EAAKC,CAAK,EAEtC,GAKP,KAAK,IAAIM,CAAS,IAAM,GACxBD,IAAc,GACdL,EAAM,gBAAgBJ,EAAOC,EAAOC,EAAKC,CAAG,GAE5CC,EAAM,wBAAwBJ,EAAOC,EAAOC,EAAKC,CAAG,EAC7C,IAGF,EAAA,CAGT,gBAAgBD,EAAaC,EAAaC,EAAgC,CACxE,YAAK,KAAOF,EACZ,KAAK,KAAOC,EACZ,KAAK,OAASC,EACP,EAAA,CAEX"}