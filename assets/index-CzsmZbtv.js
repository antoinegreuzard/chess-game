var _=Object.defineProperty;var F=(a,e,t)=>e in a?_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var u=(a,e,t)=>F(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();var o=(a=>(a.WHITE="white",a.BLACK="black",a))(o||{}),d=(a=>(a.PAWN="pawn",a.ROOK="rook",a.KNIGHT="knight",a.BISHOP="bishop",a.QUEEN="queen",a.KING="king",a))(d||{});class B{constructor(e,t){this.color=e,this.type=t}isPathClear(e,t,s,i,n){const r=Math.sign(s-e),l=Math.sign(i-t);let h=e+r,c=t+l;for(;h!==s||c!==i;){if(n.isWithinBounds(h,c)&&n.getPiece(h,c))return!1;h+=r,c+=l}return!0}canCapture(e,t,s){const i=s.getPiece(e,t);return!i||i.color!==this.color}}class P extends B{constructor(t){super(t,d.ROOK);u(this,"hasMoved",!1)}isValidMove(t,s,i,n,r){const l=t===i||s===n,h=this.isPathClear(t,s,i,n,r),c=this.canCapture(i,n,r);return l&&h?c:!1}}class E extends B{constructor(e){super(e,d.KNIGHT)}isValidMove(e,t,s,i,n){const r=Math.abs(s-e),l=Math.abs(i-t);return(r===2&&l===1||r===1&&l===2)&&this.canCapture(s,i,n)}}class w extends B{constructor(e){super(e,d.BISHOP)}isValidMove(e,t,s,i,n){return Math.abs(s-e)===Math.abs(i-t)&&this.isPathClear(e,t,s,i,n)?this.canCapture(s,i,n):!1}}class H extends B{constructor(e){super(e,d.QUEEN)}isValidMove(e,t,s,i,n){return(e===s||t===i||Math.abs(s-e)===Math.abs(i-t))&&this.isPathClear(e,t,s,i,n)?this.canCapture(s,i,n):!1}}class x extends B{constructor(t){super(t,d.KING);u(this,"hasMoved",!1)}isValidMove(t,s,i,n,r){const l=Math.abs(i-t),h=Math.abs(n-s);if(l<=1&&h<=1){const c=r.getPiece(i,n);return this.canCapture(i,n,r)&&(!c||c.type!==d.KING)}if(!this.hasMoved&&h===0&&l===2){const c=i>t?1:-1,I=i>t?7:0,M=r.getPiece(I,s);if(M&&M instanceof P&&!M.hasMoved){for(let p=t+c;p!==I;p+=c)if(r.getPiece(p,s))return!1;if(!r.isKingInCheck(this.color)&&!r.isSquareUnderAttack(t+c,s,this.color)&&!r.isSquareUnderAttack(i,s,this.color))return!0}}return!1}}class C extends B{constructor(e){super(e,d.PAWN)}isValidMove(e,t,s,i,n){const r=this.color===o.WHITE?1:-1,l=this.color===o.WHITE?1:6,h=(i-t)*r,c=Math.abs(s-e);if(c===0&&h===1&&!n.getPiece(s,i))return(this.color===o.WHITE&&i===7||this.color===o.BLACK&&i===0)&&this.handlePromotion(s,i,n),!0;if(c===0&&h===2&&t===l&&!n.getPiece(s,i)&&!n.getPiece(e,t+r))return n.updateEnPassantTarget(e,t,s,i,this),!0;if(c===1&&h===1){if(n.getPiece(s,i)&&this.canCapture(s,i,n))return(this.color===o.WHITE&&i===7||this.color===o.BLACK&&i===0)&&this.handlePromotion(s,i,n),!0;if(n.isEnPassantMove(e,t,s,i))return!0}return!1}handlePromotion(e,t,s){const i=document.getElementById("promotionDialog");i&&(i.style.display="block",window.promote=n=>{i.style.display="none",s.promotePawn(e,t,n)})}}function g(a){const e=document.getElementById("gameMessage");e.textContent=a,e.style.display="block"}function Q(a,e){switch(a){case"pawn":return e===o.WHITE?"♙":"♟";case"rook":return e===o.WHITE?"♖":"♜";case"knight":return e===o.WHITE?"♘":"♞";case"bishop":return e===o.WHITE?"♗":"♝";case"queen":return e===o.WHITE?"♕":"♛";case"king":return e===o.WHITE?"♔":"♚";default:return""}}function O(a,e){const t=document.getElementById("capturedWhite"),s=document.getElementById("capturedBlack");let i=[],n=[];const r=Q(a,e);e===o.WHITE?(i.push(r),t.textContent=i.join(" ")):(n.push(r),s.textContent=n.join(" "))}class j{constructor(){u(this,"grid");u(this,"enPassantTarget",null);u(this,"halfMoveCount",0);this.grid=this.initializeBoard()}initializeBoard(){const e=Array(8).fill(null).map(()=>Array(8).fill(null));return e[0]=[new P(o.WHITE),new E(o.WHITE),new w(o.WHITE),new H(o.WHITE),new x(o.WHITE),new w(o.WHITE),new E(o.WHITE),new P(o.WHITE)],e[1]=Array(8).fill(null).map(()=>new C(o.WHITE)),e[7]=[new P(o.BLACK),new E(o.BLACK),new w(o.BLACK),new H(o.BLACK),new x(o.BLACK),new w(o.BLACK),new E(o.BLACK),new P(o.BLACK)],e[6]=Array(8).fill(null).map(()=>new C(o.BLACK)),e}isWithinBounds(e,t){return e>=0&&e<8&&t>=0&&t<8}getPiece(e,t){return this.grid[t][e]}getValidMoves(e,t){let s=null;if(this.isWithinBounds(e,t)&&(s=this.getPiece(e,t)),!s)return[];const i=[];for(let n=0;n<8;n++)for(let r=0;r<8;r++)s.isValidMove(e,t,r,n,this)&&i.push({x:r,y:n});return i}getKingInCheck(){return this.isKingInCheck(o.WHITE)?this.findKing(o.WHITE):this.isKingInCheck(o.BLACK)?this.findKing(o.BLACK):null}movePiece(e,t,s,i){if(i<0||i>=this.grid.length||t<0||t>=this.grid.length||["__proto__","constructor","prototype"].includes(i.toString())||["__proto__","constructor","prototype"].includes(t.toString()))return!1;let n=null;if(this.isWithinBounds(e,t)&&(n=this.getPiece(e,t)),n&&n.isValidMove(e,t,s,i,this)){let r=null;if(this.isWithinBounds(s,i)&&(r=this.getPiece(s,i)),r&&r.type===d.KING)return!1;if(this.isEnPassantMove(e,t,s,i)&&this.captureEnPassant(e,t,s,i),n instanceof x&&Math.abs(s-e)===2){if(console.log("King"),!this.isCastlingValid(n,e,t,s))return!1;console.log(!0),this.handleCastling(s,t)}let l=null;return this.isWithinBounds(s,i)&&(l=this.getPiece(s,i)),this.grid[i][s]=n,this.grid[t][e]=null,this.isKingInCheck(n.color)?(this.grid[t][e]=n,this.grid[i][s]=l,!1):(n.type===d.PAWN||r?this.halfMoveCount=0:this.halfMoveCount++,this.grid[i][s]=n,this.grid[t][e]=null,(n instanceof x||n instanceof P)&&(n.hasMoved=!0),!0)}return!1}isCastlingValid(e,t,s,i){const n=i>t?1:-1,r=i>t?7:0;let l=null;if(this.isWithinBounds(r,s)&&(l=this.getPiece(r,s)),!(l instanceof P)||l.hasMoved||e.hasMoved)return!1;for(let h=t+n;h!==r;h+=n)if(this.getPiece(h,s))return!1;for(let h=t;h!==i+n;h+=n)if(this.isSquareUnderAttack(h,s,e.color))return!1;return!0}handleCastling(e,t){e===6?this.getPiece(7,t)instanceof P&&this.movePiece(7,t,5,t):e===2&&this.getPiece(0,t)instanceof P&&this.movePiece(0,t,3,t)}updateEnPassantTarget(e,t,s,i,n){n instanceof C&&Math.abs(i-t)===2&&e===s?this.enPassantTarget={x:s,y:(t+i)/2}:this.enPassantTarget=null}captureEnPassant(e,t,s,i){const n=this.getPiece(e,t);if(this.isEnPassantMove(e,t,s,i)&&n instanceof C){const r=n.color===o.WHITE?-1:1,l=i+r,h=this.getPiece(s,l);h&&h.type===d.PAWN&&(this.grid[l][s]=null,O(h.type,h.color)),this.grid[i][s]=n,this.grid[t][e]=null}}isEnPassantMove(e,t,s,i){return this.enPassantTarget?this.getPiece(e,t)instanceof C&&s===this.enPassantTarget.x&&i===this.enPassantTarget.y&&Math.abs(e-s)===1&&Math.abs(t-i)===1:!1}promotePawn(e,t,s){var n;const i=(n=this.getPiece(e,t))==null?void 0:n.color;if(i)switch(s){case"queen":this.grid[t][e]=new H(i);break;case"rook":this.grid[t][e]=new P(i);break;case"bishop":this.grid[t][e]=new w(i);break;case"knight":this.grid[t][e]=new E(i);break}}isKingInCheck(e){const t=this.findKing(e);if(!t)return!1;for(let s=0;s<8;s++)for(let i=0;i<8;i++){const n=this.getPiece(i,s);if(n&&n.color!==e&&n.isValidMove(i,s,t.x,t.y,this))return!0}return!1}isCheckmate(e){if(!this.isKingInCheck(e))return!1;for(let t=0;t<8;t++)for(let s=0;s<8;s++){const i=this.getPiece(s,t);if(i&&i.color===e){for(let n=0;n<8;n++)for(let r=0;r<8;r++)if(i.isValidMove(s,t,r,n,this)){const l=this.getPiece(r,n);this.grid[n][r]=i,this.grid[t][s]=null;const h=!this.isKingInCheck(e);if(this.grid[t][s]=i,this.grid[n][r]=l,h)return!1}}}return!0}isStalemate(e){if(this.isKingInCheck(e))return!1;for(let t=0;t<8;t++)for(let s=0;s<8;s++){const i=this.getPiece(s,t);if(i&&i.color===e){for(let n=0;n<8;n++)for(let r=0;r<8;r++)if(i.isValidMove(s,t,r,n,this)){const l=this.getPiece(r,n);this.grid[n][r]=i,this.grid[t][s]=null;const h=!this.isKingInCheck(e);if(this.grid[t][s]=i,this.grid[n][r]=l,h)return!1}}}return!0}findKing(e){for(let t=0;t<8;t++)for(let s=0;s<8;s++){const i=this.getPiece(s,t);if(i&&i instanceof x&&i.color===e)return{x:s,y:t}}return null}isSquareUnderAttack(e,t,s){for(let i=0;i<8;i++)for(let n=0;n<8;n++){const r=this.getPiece(n,i);if(r&&r.color!==s&&r.isValidMove(n,i,e,t,this))return!0}return!1}isInsufficientMaterial(){const e=this.grid.flat().filter(t=>t!==null);return e.length<=2?!0:e.length===3&&e.some(t=>(t==null?void 0:t.type)===d.BISHOP||(t==null?void 0:t.type)===d.KNIGHT)}isFiftyMoveRule(){return this.halfMoveCount>=50}setPiece(e,t,s){this.grid[t][e]=s}clearBoard(){for(let e=0;e<8;e++)for(let t=0;t<8;t++)this.grid[e][t]=null}isMoveValid(e,t,s,i){const n=this.getPiece(e,t);if(!n||s<0||s>=8||i<0||i>=8||!n.isValidMove(e,t,s,i,this))return!1;const r=this.getPiece(s,i);return!(r&&r.color===n.color)}}const J={[d.PAWN]:1,[d.KNIGHT]:3,[d.BISHOP]:3.25,[d.ROOK]:5,[d.QUEEN]:9,[d.KING]:0},A={"3,3":.5,"3,4":.5,"4,3":.5,"4,4":.5,"2,3":.25,"2,4":.25,"3,2":.25,"4,2":.25,"4,5":.25,"3,5":.25,"5,3":.25,"5,4":.25},z={[o.WHITE]:{"0,6":.5,"0,7":.5,"0,1":.5,"0,0":.5},[o.BLACK]:{"7,6":.5,"7,7":.5,"7,1":.5,"7,0":.5}};function Z(a,e){let t=0;for(let s=0;s<8;s++)for(let i=0;i<8;i++){const n=a.getPiece(i,s);if(n){let r=J[n.type];const l=`${i},${s}`;A[l]&&(r+=A[l]),n.type===d.KING&&z[n.color][l]&&(r+=z[n.color][l]),t+=n.color===e?r:-r}}return t}class X{constructor(e){u(this,"transpositionTable");this.color=e,this.transpositionTable=new Map}makeMove(e){let t=null,s=-1/0;const i=3;let n=this.getAllValidMoves(e);n=this.sortMoves(n,e);for(const r of n){const l=e.getPiece(r.fromX,r.fromY),h=e.getPiece(r.toX,r.toY);e.movePiece(r.fromX,r.fromY,r.toX,r.toY);const c=this.minimax(e,i-1,-1/0,1/0,!1);e.setPiece(r.fromX,r.fromY,l),e.setPiece(r.toX,r.toY,h),c>s&&(s=c,t=r)}return t}minimax(e,t,s,i,n){const r=e.toString();if(this.transpositionTable.has(r))return this.transpositionTable.get(r);if(t===0||e.isCheckmate(this.color)||e.isCheckmate(this.getOpponentColor())){const l=Z(e,this.color);return this.transpositionTable.set(r,l),l}if(console.log(`Simulation: ${n?"Maximizing":"Minimizing"}, Depth: ${t}, Alpha: ${s}, Beta: ${i}`),n){let l=-1/0,h=this.getAllValidMoves(e);h=this.sortMoves(h,e);for(const c of h){const I=e.getPiece(c.fromX,c.fromY),M=e.getPiece(c.toX,c.toY);e.movePiece(c.fromX,c.fromY,c.toX,c.toY);const p=this.minimax(e,t-1,s,i,!1);if(e.setPiece(c.fromX,c.fromY,I),e.setPiece(c.toX,c.toY,M),l=Math.max(l,p),s=Math.max(s,p),i<=s)break}return this.transpositionTable.set(r,l),l}else{let l=1/0,h=this.getAllValidMoves(e);h=this.sortMoves(h,e);for(const c of h){const I=e.getPiece(c.fromX,c.fromY),M=e.getPiece(c.toX,c.toY);e.movePiece(c.fromX,c.fromY,c.toX,c.toY);const p=this.minimax(e,t-1,s,i,!0);if(e.setPiece(c.fromX,c.fromY,I),e.setPiece(c.toX,c.toY,M),l=Math.min(l,p),i=Math.min(i,p),i<=s)break}return this.transpositionTable.set(r,l),l}}getOpponentColor(){return this.color===o.WHITE?o.BLACK:o.WHITE}getAllValidMoves(e){const t=[];for(let s=0;s<8;s++)for(let i=0;i<8;i++){const n=e.getPiece(i,s);if(n&&n.color===this.color){const r=e.getValidMoves(i,s);for(const l of r)e.isMoveValid(i,s,l.x,l.y)&&t.push({fromX:i,fromY:s,toX:l.x,toY:l.y})}}return t}sortMoves(e,t){return e.sort((s,i)=>{const n=t.getPiece(s.toX,s.toY),r=t.getPiece(i.toX,i.toY);if(n&&!r)return-1;if(!n&&r)return 1;const l=A[`${s.toX},${s.toY}`]||0;return(A[`${i.toX},${i.toY}`]||0)-l})}}class Y{constructor(){u(this,"board");u(this,"ai");this.board=new j,this.ai=new X(o.BLACK)}start(){console.log("Nouvelle partie d'échecs démarrée !")}getBoard(){return this.board}makeAIMove(){if(this.ai){const e=this.ai.makeMove(this.board);e?(this.board.movePiece(e.fromX,e.fromY,e.toX,e.toY),console.log(`L'IA a déplacé une pièce de (${e.fromX}, ${e.fromY}) à (${e.toX}, ${e.toY})`)):console.log("Aucun mouvement valide pour l'IA.")}}}class ee{constructor(e,t,s){u(this,"canvas");u(this,"context");u(this,"tileSize");u(this,"draggingPiece",null);u(this,"startX",null);u(this,"startY",null);u(this,"highlightedMoves",[]);u(this,"kingInCheckPosition",null);this.board=e,this.moveHandler=s,this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.tileSize=this.canvas.width/8,this.canvas.style.cursor="default",this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this))}animateMove(e,t,s,i,n){let l=0;const h=e*this.tileSize,c=t*this.tileSize,I=(s-e)*this.tileSize/10,M=(i-t)*this.tileSize/10,p=()=>{l<=10?(this.drawBoard(),this.context.fillStyle=n.color===o.WHITE?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText(this.getPieceText(n),h+I*l+this.tileSize/2,c+M*l+this.tileSize/2),l++,requestAnimationFrame(p)):this.drawBoard()};p()}highlightValidMoves(e){this.context.fillStyle="rgba(0, 255, 0, 0.5)",e.forEach(t=>{this.context.fillRect(t.x*this.tileSize,t.y*this.tileSize,this.tileSize,this.tileSize)})}drawBoard(){const e=this.board.getKingInCheck();this.kingInCheckPosition=e?{x:e.x,y:e.y}:null,this.drawTiles(),this.drawPieces()}drawTiles(){for(let e=0;e<8;e++)for(let t=0;t<8;t++){let i=(t+e)%2===1?"#769656":"#eeeed2";this.kingInCheckPosition&&this.kingInCheckPosition.x===t&&this.kingInCheckPosition.y===e&&(i="#ff6347"),this.context.fillStyle=i,this.context.fillRect(t*this.tileSize,e*this.tileSize,this.tileSize,this.tileSize)}}drawPieces(){for(let e=0;e<8;e++)for(let t=0;t<8;t++){const s=this.board.getPiece(t,e);s&&this.drawPiece(s,t,e)}}drawPiece(e,t,s){this.context.fillStyle=e.color==="white"?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle";const i=this.getPieceText(e);this.context.fillText(i,t*this.tileSize+this.tileSize/2,s*this.tileSize+this.tileSize/2)}getPieceText(e){switch(e.type){case"pawn":return e.color==="white"?"♙":"♟";case"rook":return e.color==="white"?"♖":"♜";case"knight":return e.color==="white"?"♘":"♞";case"bishop":return e.color==="white"?"♗":"♝";case"queen":return e.color==="white"?"♕":"♛";case"king":return e.color==="white"?"♔":"♚";default:return""}}handleMouseDown(e){const t=this.canvas.getBoundingClientRect(),s=Math.floor((e.clientX-t.left)/this.tileSize),i=Math.floor((e.clientY-t.top)/this.tileSize),n=this.board.getPiece(s,i);n&&(this.draggingPiece=n,this.startX=s,this.startY=i,this.canvas.style.cursor="grabbing",this.highlightedMoves=this.board.getValidMoves(s,i),this.drawBoard(),this.highlightValidMoves(this.highlightedMoves))}handleMouseMove(e){const t=this.canvas.getBoundingClientRect(),s=Math.floor((e.clientX-t.left)/this.tileSize),i=Math.floor((e.clientY-t.top)/this.tileSize);let n=null;if(this.board.isWithinBounds(s,i)&&(n=this.board.getPiece(s,i)),n&&!this.draggingPiece?this.canvas.style.cursor="pointer":this.draggingPiece||(this.canvas.style.cursor="default"),!this.draggingPiece)return;this.drawBoard(),this.highlightValidMoves(this.highlightedMoves);const r=e.clientX-t.left,l=e.clientY-t.top;this.context.fillStyle=this.draggingPiece.color==="white"?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle";const h=this.getPieceText(this.draggingPiece);this.context.fillText(h,r,l)}handleMouseUp(e){if(!this.draggingPiece||this.startX===null||this.startY===null)return;const t=this.canvas.getBoundingClientRect(),s=Math.floor((e.clientX-t.left)/this.tileSize),i=Math.floor((e.clientY-t.top)/this.tileSize),n=this.moveHandler(this.startX,this.startY,s,i);this.draggingPiece=null,this.startX=null,this.startY=null,this.canvas.style.cursor="default",this.highlightedMoves=[],this.drawBoard(),n&&this.drawBoard()}}class G{constructor(e,t){u(this,"intervalId",null);u(this,"currentTime");u(this,"onTimeUpdate");u(this,"isRunning",!1);this.initialTime=e,this.currentTime=e,this.onTimeUpdate=t}start(){this.isRunning||(this.isRunning=!0,this.intervalId=window.setInterval(()=>{this.currentTime--,this.onTimeUpdate(this.currentTime),this.currentTime<=0&&(this.currentTime=0,this.stop(),this.onTimeUpdate(this.currentTime))},1e3))}stop(){this.isRunning&&(this.intervalId!==null&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1)}reset(e){this.stop(),this.currentTime=e,this.start()}}const U=new Y,v=U.getBoard(),te=document.getElementById("moveHistory"),ie=document.getElementById("currentTurn"),se=document.getElementById("timer"),N=document.getElementById("passTurnButton"),$=document.getElementById("gameMessage"),S=document.getElementById("replayButton"),R=document.getElementById("drawButton"),W=document.getElementById("acceptDrawButton");let f=o.WHITE,m="playing",b=!1,L=[[]],V=!1,y=new G(60,a=>D(a,o.WHITE)),k=new G(60,a=>D(a,o.BLACK));function D(a,e){e===f&&(se.textContent=`Temps restant: ${a}s`,a<=0&&!V&&(g(`${f===o.WHITE?"Noir":"Blanc"} gagne par temps écoulé !`),T()))}const q=new ee(v,"chessBoard",oe);q.drawBoard();y.start();function T(){V||(V=!0,y.isRunning&&y.stop(),k.isRunning&&k.stop(),m="waiting",g("La partie est terminée !"),S.style.display="block")}function ne(){$.textContent="",$.style.display="none"}function K(){ne(),f=f===o.WHITE?o.BLACK:o.WHITE,ie.textContent=`Tour actuel: ${f===o.WHITE?"Blanc":"Noir"}`,b=!1,f===o.WHITE?(k.isRunning&&k.stop(),y.reset(60)):(y.isRunning&&y.stop(),k.reset(60)),v.isStalemate(f)&&(g("Pat ! La partie est nulle."),T()),v.isInsufficientMaterial()&&(g("Matériel insuffisant pour continuer, partie nulle !"),T()),v.isFiftyMoveRule()&&(g("Règle des 50 coups, partie nulle !"),T()),m==="drawProposed"?W.style.display="block":W.style.display="none",m==="playing"&&(m="playing"),L.push([])}function re(a,e,t,s,i){const n=`${i} de (${a}, ${e}) à (${t}, ${s})`,r=document.createElement("li");r.textContent=n,te.appendChild(r),L[L.length-1].push({fromX:a,fromY:e,toX:t,toY:s,pieceType:i})}function oe(a,e,t,s){if(m==="waiting"||b)return g("Veuillez attendre le prochain tour !"),!1;const i=v.getPiece(a,e),n=v.getPiece(t,s);if(!i||i.color!==f)return g(`C'est le tour de ${f===o.WHITE?"Blanc":"Noir"}`),!1;if(i.isValidMove(a,e,t,s,v)){if(v.movePiece(a,e,t,s)){n&&O(n.type,n.color),re(a,e,t,s,i.type),q.animateMove(a,e,t,s,i);const r=f===o.WHITE?o.BLACK:o.WHITE;return v.isKingInCheck(r)&&(v.isCheckmate(r)?(g(`Échec et Mat ! ${f===o.WHITE?"Blanc":"Noir"} gagne !`),T()):g(`Échec au ${r===o.WHITE?"Blanc":"Noir"} !`)),K(),f===o.BLACK&&(U.makeAIMove(),K()),!0}return g("Mouvement invalide !"),!1}return!1}N&&N.addEventListener("click",a=>{a.preventDefault(),m==="playing"&&(g(`Tour passé pour ${f===o.WHITE?"Blanc":"Noir"}`),K())});S&&S.addEventListener("click",()=>{location.reload()});R&&R.addEventListener("click",()=>{m==="playing"&&(g("Proposition de nullité faite. Attente de la réponse de l'adversaire."),m="drawProposed",K())});W&&W.addEventListener("click",()=>{m==="drawProposed"&&(g("Partie Nulle par Accord Mutuel !"),m="waiting",T())});
//# sourceMappingURL=index-CzsmZbtv.js.map
