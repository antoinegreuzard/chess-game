(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const U="modulepreload",j=function(h){return"/chess-game/"+h},L={},B=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");s=Promise.allSettled(e.map(o=>{if(o=j(o),o in L)return;L[o]=!0;const g=o.endsWith(".css"),I=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${I}`))return;const u=document.createElement("link");if(u.rel=g?"stylesheet":U,g||(u.as="script"),u.crossOrigin="",u.href=o,l&&u.setAttribute("nonce",l),document.head.appendChild(u),g)return new Promise((v,w)=>{u.addEventListener("load",v),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})}))}function n(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return s.then(r=>{for(const l of r||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};async function f(h,t){switch(h){case c.PAWN:const{Pawn:e}=await B(async()=>{const{Pawn:o}=await import("./pawn-CrrxQzoo.js");return{Pawn:o}},[]);return new e(t);case c.ROOK:const{Rook:i}=await B(async()=>{const{Rook:o}=await import("./rook-CeVQ2EkT.js");return{Rook:o}},[]);return new i(t);case c.KNIGHT:const{Knight:s}=await B(async()=>{const{Knight:o}=await import("./knight-C9MINkJj.js");return{Knight:o}},[]);return new s(t);case c.BISHOP:const{Bishop:n}=await B(async()=>{const{Bishop:o}=await import("./bishop-D99zLZjK.js");return{Bishop:o}},[]);return new n(t);case c.QUEEN:const{Queen:r}=await B(async()=>{const{Queen:o}=await import("./queen-D5EOt_Mn.js");return{Queen:o}},[]);return new r(t);case c.KING:const{King:l}=await B(async()=>{const{King:o}=await import("./king-B6qo_p3S.js");return{King:o}},[]);return new l(t);default:throw new Error(`Type de pièce inconnu : ${h}`)}}var a=(h=>(h.WHITE="white",h.BLACK="black",h))(a||{}),c=(h=>(h.PAWN="pawn",h.ROOK="rook",h.KNIGHT="knight",h.BISHOP="bishop",h.QUEEN="queen",h.KING="king",h))(c||{});class ${constructor(t,e){this.color=t,this.type=e}hasMoved=!1;isPathClear(t,e,i,s,n){const r=Math.sign(i-t),l=Math.sign(s-e);let o=t+r,g=e+l;for(;o!==i||g!==s;){if(n.getPiece(o,g)!==null)return!1;o+=r,g+=l}return!0}static isKing(t){return t.type==="king"}canCapture(t,e,i){const s=i.getPiece(t,e);return!s||s.color!==this.color}toData(){return{color:this.color,type:this.type}}static async fromData(t){return await f(t.type,t.color)}}let _=[],z=[];function C(h){const t=document.getElementById("gameMessage");t.textContent=h,t.style.display="block"}function G(h,t){switch(h){case c.PAWN:return t===a.WHITE?"♙":"♟";case c.ROOK:return t===a.WHITE?"♖":"♜";case c.KNIGHT:return t===a.WHITE?"♘":"♞";case c.BISHOP:return t===a.WHITE?"♗":"♝";case c.QUEEN:return t===a.WHITE?"♕":"♛";case c.KING:return t===a.WHITE?"♔":"♚";default:return""}}function K(h,t){const e=G(h,t);t===a.WHITE?_.push(e):z.push(e),q()}function q(){const h=document.getElementById("capturedWhite"),t=document.getElementById("capturedBlack");h&&(h.textContent=_.join(" ")),t&&(t.textContent=z.join(" "))}class k{grid;enPassantTarget=null;halfMoveCount=0;currentPlayer=a.WHITE;constructor(){this.grid=[]}async init(){this.grid=await this.initializeBoard()}async initializeBoard(){const t=Array(8).fill(null).map(()=>Array(8).fill(null));return t[0]=[await f(c.ROOK,a.WHITE),await f(c.KNIGHT,a.WHITE),await f(c.BISHOP,a.WHITE),await f(c.KING,a.WHITE),await f(c.QUEEN,a.WHITE),await f(c.BISHOP,a.WHITE),await f(c.KNIGHT,a.WHITE),await f(c.ROOK,a.WHITE)],t[1]=await Promise.all(Array(8).fill(null).map(()=>f(c.PAWN,a.WHITE))),t[7]=[await f(c.ROOK,a.BLACK),await f(c.KNIGHT,a.BLACK),await f(c.BISHOP,a.BLACK),await f(c.KING,a.BLACK),await f(c.QUEEN,a.BLACK),await f(c.BISHOP,a.BLACK),await f(c.KNIGHT,a.BLACK),await f(c.ROOK,a.BLACK)],t[6]=await Promise.all(Array(8).fill(null).map(()=>f(c.PAWN,a.BLACK))),t}isWithinBounds(t,e){return t>=0&&t<8&&e>=0&&e<8}getPiece(t,e){return this.grid[e][t]}getValidMoves(t,e){let i=null;if(this.isWithinBounds(t,e)&&(i=this.getPiece(t,e)),!i)return[];const s=[];for(let n=0;n<8;n++)for(let r=0;r<8;r++)i.isValidMove(t,e,r,n,this)&&s.push({x:r,y:n});return s}isCastlingMove(t,e,i,s){const n=this.getPiece(t,e);return n&&n.type===c.KING&&Math.abs(i-t)===2&&e===s}captureEnPassantIfValid(t,e,i,s){if(this.isEnPassantMove(t,e,i,s)){const n=this.getPiece(t,e);if(!n)return;const r=s+(n.color===a.WHITE?-1:1);this.grid[r][i]&&(this.grid[r][i]=null)}}getKingInCheck(){return this.isKingInCheck(a.WHITE)?this.findKing(a.WHITE):this.isKingInCheck(a.BLACK)?this.findKing(a.BLACK):null}movePiece(t,e,i,s){if(!this.isWithinBounds(t,e)||!this.isWithinBounds(i,s)||["__proto__","constructor","prototype"].includes(e.toString())||["__proto__","constructor","prototype"].includes(s.toString()))return!1;const n=this.getPiece(t,e);if(n&&n.isValidMove(t,e,i,s,this)){const r=this.getPiece(i,s);if(r&&r.type===c.KING)return!1;if(n?.type===c.KING&&Math.abs(i-t)===2)return this.isCastlingValid(n,t,e,i)?(this.handleCastling(i,e),n.hasMoved=!0,!0):!1;if(n?.type===c.PAWN&&this.isEnPassantMove(t,e,i,s)&&this.captureEnPassant(t,e,i,s),this.grid[s][i]=n,this.grid[e][t]=null,n.hasMoved=!0,this.isKingInCheck(n.color))return this.grid[e][t]=n,this.grid[s][i]=r,!1;"hasMoved"in n&&(n.hasMoved=!0),this.updateEnPassantTarget(t,e,i,s,n),this.halfMoveCount=n.type===c.PAWN||r?0:this.halfMoveCount+1;const l=n.color===a.WHITE?a.BLACK:a.WHITE;return this.isCheckmate(l),!0}return!1}isCastlingValid(t,e,i,s){const n=s>e?1:-1,r=s>e?7:0,l=this.getPiece(r,i);if(l?.type!==c.ROOK||l.hasMoved||t.hasMoved)return!1;for(let o=e+n;o!==s+n;o+=n)if(this.getPiece(o,i)||this.isSquareUnderAttack(o,i,t.color))return!1;return!0}handleCastling(t,e){if(t===6){const i=this.getPiece(7,e),s=this.getPiece(4,e);i?.type===c.ROOK&&!i.hasMoved&&s?.type===c.KING&&(this.setPiece(5,e,i),this.setPiece(7,e,null),this.setPiece(6,e,s),this.setPiece(4,e,null))}else if(t===2){const i=this.getPiece(0,e),s=this.getPiece(4,e);i?.type===c.ROOK&&!i.hasMoved&&s?.type===c.KING&&(this.setPiece(3,e,i),this.setPiece(0,e,null),this.setPiece(2,e,s),this.setPiece(4,e,null))}}updateEnPassantTarget(t,e,i,s,n){n?.type===c.PAWN&&Math.abs(s-e)===2&&t===i?this.enPassantTarget={x:i,y:(e+s)/2}:this.enPassantTarget=null}captureEnPassant(t,e,i,s){const n=this.getPiece(t,e);if(this.isEnPassantMove(t,e,i,s)&&n?.type===c.PAWN){const r=n.color===a.WHITE?-1:1,l=s+r,o=this.getPiece(i,l);if(o&&o.type===c.PAWN){this.grid[l][i]=null;const g={capturedWhite:[],capturedBlack:[]};return o.color===a.WHITE?g.capturedWhite.push(o.type):g.capturedBlack.push(o.type),K(o.type,o.color),g}}return null}isEnPassantMove(t,e,i,s){return this.enPassantTarget?this.getPiece(t,e)?.type===c.PAWN&&i===this.enPassantTarget.x&&s===this.enPassantTarget.y&&Math.abs(t-i)===1&&Math.abs(e-s)===1:!1}async promotePawn(t,e,i){const s=this.getPiece(t,e)?.color;if(s)switch(i){case"queen":this.grid[e][t]=await f(c.QUEEN,s);break;case"rook":this.grid[e][t]=await f(c.ROOK,s);break;case"bishop":this.grid[e][t]=await f(c.BISHOP,s);break;case"knight":this.grid[e][t]=await f(c.KNIGHT,s);break}}isKingInCheck(t){const e=this.findKing(t);if(!e)return!1;for(let i=0;i<8;i++)for(let s=0;s<8;s++){const n=this.getPiece(s,i);if(n&&n.color!==t&&n.isValidMove(s,i,e.x,e.y,this))return!0}return!1}isCheckmate(t){if(!this.isKingInCheck(t))return!1;for(let e=0;e<8;e++)for(let i=0;i<8;i++){const s=this.getPiece(i,e);if(s&&s.color===t){const n=this.getValidMoves(i,e);for(const r of n){const l=this.getPiece(r.x,r.y);this.grid[r.y][r.x]=s,this.grid[e][i]=null;const o=!this.isKingInCheck(t);if(this.grid[e][i]=s,this.grid[r.y][r.x]=l,o)return!1}}}return!0}isStalemate(t){if(this.isKingInCheck(t))return!1;for(let e=0;e<8;e++)for(let i=0;i<8;i++){const s=this.getPiece(i,e);if(s&&s.color===t){for(let n=0;n<8;n++)for(let r=0;r<8;r++)if(s.isValidMove(i,e,r,n,this)){const l=this.getPiece(r,n);this.grid[n][r]=s,this.grid[e][i]=null;const o=!this.isKingInCheck(t);if(this.grid[e][i]=s,this.grid[n][r]=l,o)return!1}}}return!0}findKing(t){for(let e=0;e<8;e++)for(let i=0;i<8;i++){const s=this.getPiece(i,e);if(s&&s?.type===c.KING&&s.color===t)return{x:i,y:e}}return null}isKing(t,e){return this.getPiece(t,e)?.type===c.KING}isSquareUnderAttack(t,e,i){for(let s=0;s<8;s++)for(let n=0;n<8;n++){const r=this.getPiece(n,s);if(r&&r.color!==i&&r.isValidMove(n,s,t,e,this))return!0}return!1}isInsufficientMaterial(){const t=this.grid.flat().filter(e=>e!==null);return t.length<=2?!0:t.length===3&&t.some(e=>e?.type===c.BISHOP||e?.type===c.KNIGHT)}isFiftyMoveRule(){return this.halfMoveCount>=50}setPiece(t,e,i){this.grid[e][t]=i}isMoveValid(t,e,i,s){const n=this.getPiece(t,e);if(!n||i<0||i>=8||s<0||s>=8||!n.isValidMove(t,e,i,s,this))return!1;const r=this.getPiece(i,s);return!(r&&r.color===n.color)}isCapture(t,e,i,s){const n=this.isWithinBounds(t,e)?this.getPiece(t,e):null,r=this.isWithinBounds(i,s)?this.getPiece(i,s):null;return n!==null&&r!==null&&n.color!==r.color}static async fromData(t){const e=new k;return await e.init(),e.grid=await Promise.all(t.grid.map(async i=>Promise.all(i.map(async s=>s?await $.fromData(s):null)))),e}toData(){return{grid:this.grid.map(t=>t.map(e=>e?e.toData():null))}}isAdjacentToAnotherKing(t,e,i){const s=[{dx:-1,dy:-1},{dx:-1,dy:0},{dx:-1,dy:1},{dx:0,dy:-1},{dx:0,dy:1},{dx:1,dy:-1},{dx:1,dy:0},{dx:1,dy:1}];for(const{dx:n,dy:r}of s){const l=t+n,o=e+r,g=this.isWithinBounds(l,o)?this.getPiece(l,o):null;if(g?.type===c.KING&&g.color!==i)return!0}return!1}clone(){const t=new k;return t.grid=this.grid.map(e=>e.map(i=>i?Object.create(Object.getPrototypeOf(i),Object.getOwnPropertyDescriptors(i)):null)),t.enPassantTarget=this.enPassantTarget?{...this.enPassantTarget}:null,t.halfMoveCount=this.halfMoveCount,t}getPieceCount(){return this.grid.flat().filter(t=>t!==null).length}isGameOver(){return this.isCheckmate(a.WHITE)||this.isCheckmate(a.BLACK)||this.isStalemate(a.WHITE)||this.isStalemate(a.BLACK)||this.isInsufficientMaterial()?!0:this.isFiftyMoveRule()}getWinner(){return this.isCheckmate(a.BLACK)?a.WHITE:this.isCheckmate(a.WHITE)?a.BLACK:(this.isStalemate(a.WHITE)||this.isStalemate(a.BLACK)||this.isInsufficientMaterial()||this.isFiftyMoveRule(),null)}getPieces(){return this.grid.flat().filter(t=>t!==null)}setPlayerColor(t){this.currentPlayer=t}getPlayerColor(){return this.currentPlayer}}class F{board;aiWorker;aiColor;lastAIMove=null;moveHistory;constructor(t,e){this.board=new k,this.aiWorker=new Worker(new URL("/chess-game/assets/ai.worker-DEaJkhjr.js",import.meta.url),{type:"module"}),this.aiColor=t===a.WHITE?a.BLACK:a.WHITE,this.moveHistory=e}async getBoard(){return await this.board.init(),this.board}makeAIMove(){return new Promise(t=>{this.aiWorker.onmessage=i=>{const{bestMove:s,captureData:n,promotionRequired:r}=i.data;if(r){const l=document.getElementById("promotionDialog");l.style.display="block",window.promote=o=>{l.style.display="none",this.aiWorker.postMessage({promotionType:o})}}s&&(this.lastAIMove=s,this.board.movePiece(s.fromX,s.fromY,s.toX,s.toY)&&n&&(n.capturedWhite.forEach(o=>K(o,a.WHITE)),n.capturedBlack.forEach(o=>K(o,a.BLACK)))),t()};const e=this.board.toData();this.aiWorker.postMessage({boardData:e,aiColor:this.aiColor})})}getLastAIMove(){return this.lastAIMove}saveGameToFile(){const t={moves:this.moveHistory,winner:this.board.getWinner()},e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(i),n=document.createElement("a");n.href=s,n.download=`game_${Date.now()}.json`,n.style.display="none",document.body.appendChild(n),n.click(),URL.revokeObjectURL(s),document.body.removeChild(n)}}class Q{constructor(t,e,i,s=!1){this.board=t,this.moveHandler=i,this.canvas=document.getElementById(e),this.context=this.canvas.getContext("2d"),this.tileSize=this.canvas.width/8,this.flipBoard=s,this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this))}canvas;context;tileSize;flipBoard;draggingPiece=null;startX=null;startY=null;highlightedMoves=[];kingInCheckPosition=null;getCoordinates(t,e){return this.flipBoard?{x:7-t,y:7-e}:{x:t,y:e}}getInverseCoordinates(t,e){return this.flipBoard?{x:7-t,y:7-e}:{x:t,y:e}}animateMove(t,e,i,s,n){let l=0;const{x:o,y:g}=this.getCoordinates(t,e),{x:I,y:u}=this.getCoordinates(i,s),v=(I-o)*this.tileSize/10,w=(u-g)*this.tileSize/10,E=()=>{l<=10?(this.drawBoard(),this.context.fillStyle=n.color===a.WHITE?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText(this.getPieceText(n),o*this.tileSize+v*l+this.tileSize/2,g*this.tileSize+w*l+this.tileSize/2),l++,requestAnimationFrame(E)):this.drawBoard()};E()}highlightValidMoves(t){this.context.fillStyle="rgba(0, 255, 0, 0.5)",t.forEach(e=>{const{x:i,y:s}=this.getCoordinates(e.x,e.y);this.context.fillRect(i*this.tileSize,s*this.tileSize,this.tileSize,this.tileSize)})}drawBoard(){const t=this.board.getKingInCheck();this.kingInCheckPosition=t?this.getCoordinates(t.x,t.y):null,this.drawTiles(),this.drawPieces()}drawTiles(){for(let t=0;t<8;t++)for(let e=0;e<8;e++){const{x:i,y:s}=this.getCoordinates(e,t);let r=(e+t)%2===1?"#769656":"#eeeed2";this.kingInCheckPosition&&this.kingInCheckPosition.x===i&&this.kingInCheckPosition.y===s&&(r="#ff6347"),this.context.fillStyle=r,this.context.fillRect(i*this.tileSize,s*this.tileSize,this.tileSize,this.tileSize)}}drawPieces(){for(let t=0;t<8;t++)for(let e=0;e<8;e++){const i=this.board.getPiece(e,t);if(i){const{x:s,y:n}=this.getCoordinates(e,t);this.drawPiece(i,s,n)}}}drawPiece(t,e,i){this.context.fillStyle=t.color==="white"?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle";const s=this.getPieceText(t);this.context.fillText(s,e*this.tileSize+this.tileSize/2,i*this.tileSize+this.tileSize/2)}getPieceText(t){switch(t.type){case"pawn":return t.color==="white"?"♙":"♟";case"rook":return t.color==="white"?"♖":"♜";case"knight":return t.color==="white"?"♘":"♞";case"bishop":return t.color==="white"?"♗":"♝";case"queen":return t.color==="white"?"♕":"♛";case"king":return t.color==="white"?"♔":"♚";default:return""}}handleMouseDown(t){const e=this.canvas.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.tileSize),s=Math.floor((t.clientY-e.top)/this.tileSize),{x:n,y:r}=this.getInverseCoordinates(i,s),l=this.board.getPiece(n,r);l&&(this.draggingPiece=l,this.startX=n,this.startY=r,this.canvas.style.cursor="grabbing",this.highlightedMoves=this.board.getValidMoves(n,r),this.drawBoard(),this.highlightValidMoves(this.highlightedMoves))}handleMouseMove(t){const e=this.canvas.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.tileSize),s=Math.floor((t.clientY-e.top)/this.tileSize);let n=null;const{x:r,y:l}=this.getInverseCoordinates(i,s);if(this.board.isWithinBounds(r,l)&&(n=this.board.getPiece(r,l)),this.canvas.style.cursor=n&&!this.draggingPiece?"pointer":"default",!this.draggingPiece)return;this.drawBoard(),this.highlightValidMoves(this.highlightedMoves);const o=t.clientX-e.left,g=t.clientY-e.top;this.context.fillStyle=this.draggingPiece.color==="white"?"white":"black",this.context.font="48px Arial",this.context.textAlign="center",this.context.textBaseline="middle";const I=this.getPieceText(this.draggingPiece);this.context.fillText(I,o,g)}handleMouseUp(t){if(!this.draggingPiece||this.startX===null||this.startY===null)return;const e=this.canvas.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.tileSize),s=Math.floor((t.clientY-e.top)/this.tileSize),{x:n,y:r}=this.getInverseCoordinates(i,s),l=this.moveHandler(this.startX,this.startY,n,r);this.draggingPiece=null,this.startX=null,this.startY=null,this.canvas.style.cursor="default",this.highlightedMoves=[],this.drawBoard(),l&&this.drawBoard()}}class R{constructor(t,e){this.initialTime=t,this.currentTime=t,this.onTimeUpdate=e}intervalId=null;currentTime;onTimeUpdate;isRunning=!1;start(){this.isRunning||(this.isRunning=!0,this.intervalId=window.setInterval(()=>{this.currentTime--,this.onTimeUpdate(this.currentTime),this.currentTime<=0&&(this.currentTime=0,this.stop(),this.onTimeUpdate(this.currentTime))},1e3))}stop(){this.isRunning&&(this.intervalId!==null&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1)}reset(t){this.stop(),this.currentTime=t,this.onTimeUpdate(this.currentTime),this.start()}}async function J(h){let t=[[]];const e=new F(h,t),i=await e.getBoard();i.setPlayerColor(h);const s=document.getElementById("whiteMoves"),n=document.getElementById("blackMoves"),r=document.getElementById("currentTurn"),l=document.getElementById("timer"),o=document.getElementById("passTurnButton"),g=document.getElementById("gameMessage"),I=document.getElementById("replayButton");let u=a.WHITE,v=!1,w=!1,E=!1,T=new R(60,d=>S(d,a.WHITE)),M=new R(60,d=>S(d,a.BLACK));function S(d,p){p===u&&(l.textContent=`Temps restant: ${d}s`,d<=0&&!w&&x(`${u===a.WHITE?"Noir":"Blanc"} gagne par temps écoulé !`))}const H=new Q(i,"chessBoard",(d,p,P,y)=>(V(d,p,P,y).then(m=>{m||C("Mouvement non autorisé.")}),!0),h===a.WHITE);H.drawBoard(),h===a.WHITE?T.start():(M.start(),await O());function x(d){C(d),w=!0,I.style.display="block",T.isRunning&&T.stop(),M.isRunning&&M.stop(),e.saveGameToFile()}function D(){g.textContent="",g.style.display="none"}async function b(){if(D(),u=u===a.WHITE?a.BLACK:a.WHITE,r.textContent=`Tour actuel: ${u===a.WHITE?"Blanc":"Noir"}`,v=!1,o.disabled=u!==h,u===a.WHITE?(M.isRunning&&M.stop(),T.reset(60)):(T.isRunning&&T.stop(),M.reset(60)),i.isKingInCheck(u)){if(i.isCheckmate(u)){x(`${u===a.WHITE?"Noir":"Blanc"} gagne par échec et mat !`);return}}else if(i.isStalemate(u)){x("Pat ! La partie est nulle.");return}else if(i.isInsufficientMaterial()){x("Matériel insuffisant pour continuer, partie nulle !");return}else if(i.isFiftyMoveRule()){x("Règle des 50 coups, partie nulle !");return}t.push([]),u!==h&&await O()}async function O(){E=!0,await e.makeAIMove();const d=e.getLastAIMove();d&&N(d.fromX,d.fromY,d.toX,d.toY,i.getPiece(d.toX,d.toY)?.type||c.PAWN),H.drawBoard(),E=!1,await b()}function N(d,p,P,y,m){const W=`${G(m,u)} de (${d}, ${p}) à (${P}, ${y})`,A=document.createElement("li");A.textContent=W,u===a.WHITE&&s?s.appendChild(A):u===a.BLACK&&n&&n.appendChild(A),t[t.length-1].push({fromX:d,fromY:p,toX:P,toY:y,pieceType:m})}async function V(d,p,P,y){if(v||w)return C("Veuillez attendre le prochain tour !"),!1;const m=i.getPiece(d,p),W=i.getPiece(P,y);if(!m||m.color!==u)return E||C(`C'est le tour de ${u===a.WHITE?"Blanc":"Noir"}`),!1;if(m.isValidMove(d,p,P,y,i)){if(i.movePiece(d,p,P,y))return v=!0,W&&K(W.type,W.color),N(d,p,P,y,m.type),H.animateMove(d,p,P,y,m),await b(),!0;C("Mouvement invalide !")}return!1}o&&o.addEventListener("click",async d=>{d.preventDefault(),u===h&&!i.isKingInCheck(h)&&(C(`Tour passé pour ${u===a.WHITE?"Blanc":"Noir"}`),await b())}),I&&I.addEventListener("click",()=>{location.reload()})}window.startGame=h=>J(h);export{$ as P,c as a,a as b,f as c};
//# sourceMappingURL=index-hDjJt1J2.js.map
